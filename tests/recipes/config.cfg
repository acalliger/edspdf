[train]
model = ${pipeline}
max_steps = 10
lr = 8e-4
seed = 43

[train.train_data]
@adapter = segmentation-adapter

[train.val_data]
@adapter = segmentation-adapter

[pipeline]
components = ["extractor", "classifier"]
components_config = ${components}

[components]

[components.extractor]
@factory = "pdfminer-extractor"

[components.classifier]
@factory = "deep-classifier"
labels = []
activation = "relu"

[components.classifier.embedding]
@factory = "box-embedding"
size = 72
dropout_p = 0.1

[components.classifier.embedding.layout_encoder]
@factory = "box-layout-embedding"
n_positions = 64
x_mode = "learned"
y_mode = "learned"
w_mode = "learned"
h_mode = "learned"

[components.classifier.embedding.text_encoder]
@factory = "box-text-embedding"

[components.classifier.embedding.text_encoder.pooler]
@factory = "cnn-pooler"
out_channels = 64
kernel_sizes = [3,4,5]

[components.classifier.embedding.contextualizer]
@factory = "box-transformer"
input_size = 72
num_heads = 4
dropout_p = 0.1
activation = "gelu"
init_resweight = 0.01
head_size = 16
attention_mode = ["c2c", "c2p", "p2c"]
n_layers = 1
n_relative_positions = 64
